server {
    # "listen" on port 80, and we can change this if we want to listen on a different port    of the container.
    listen 80;
    # "index" defines files that will be used as an index.
    index index.php index.html;
    # "server_name" determines which server block is used for a given request.
    # Server block defines a virtual server used to handle requests of a defined type.
    server_name localhost;
    # It ensures that in this directory we look for files which we can use to respond to the incoming request.
    root /var/www/html/public;
    # It ensure that all incoming requests are redirected to the "index.php" files.
    location / {
        try_files $uri $uri/ /index.php?$query_string;
    }
    # Requests already targeting the .php files will be forwarded to the PHP interpreter.
    location ~ \.php$ {
        try_files $uri =404;
        fastcgi_split_path_info ^(.+\.php)(/.+)$;
        fastcgi_pass php:3000;
        fastcgi_index index.php;
        include fastcgi_params;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        fastcgi_param PATH_INFO $fastcgi_path_info;
    }
}